<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CustomLibrary</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- WELCOME SCREEN -->
    <div class="screen active" id="welcomeScreen">
      <div class="container">
        <h1 data-i18n="languageQuestionFirst">Hey, what language can we speak?</h1>
        <select id="langSelect" class="input">
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
          <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
          <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
          <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
          <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
          <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
        </select>
        <h2 data-i18n="welcomeQuestion">Welcome, what can I call you?</h2>
        <input type="text" id="welcomeUsername" class="input" data-i18n-placeholder="yourName" placeholder="Your name" autocomplete="off">
        <button id="checkUserBtn" class="button" data-i18n="continue" disabled>Continue</button>
      </div>
    </div>

    <!-- LOGIN SCREEN -->
    <div class="screen" id="loginScreen">
      <div class="container">
        <h2 id="welcomeBackText" data-i18n="welcomeBack">Welcome back!</h2>
        <input type="text" id="loginPin" class="input" data-i18n-placeholder="enterPin" placeholder="Enter your 4-digit PIN" maxlength="4" pattern="[0-9]*" inputmode="numeric" autocomplete="off">
        <button id="loginBtn" class="button" data-i18n="login" disabled>Login</button>
        <button id="backToUsernameBtn" class="button secondary" data-i18n="back">Back</button>
      </div>
    </div>

    <!-- REGISTER SCREEN -->
    <div class="screen" id="registerScreen">
      <div class="container">
        <h2 data-i18n="newUser">New user!</h2>
        <h3 data-i18n="addonNameQuestion">And what should I be called?</h3>
        <p data-i18n="addonNameHelp">This will be the addon name in your player</p>
        <input type="text" id="addonName" class="input" data-i18n-placeholder="addonNameHelp" placeholder="Addon name" autocomplete="off">
        <h3 data-i18n="tmdbQuestion">I'll need your TMDB API Key</h3>
        <p><span data-i18n="getTmdbKeyText">Get it</span> <a href="https://www.themoviedb.org/settings/api" target="_blank" data-i18n="here">HERE</a></p>
        <input type="text" id="registerTmdbKey" class="input" data-i18n-placeholder="tmdbKeyPlaceholder" placeholder="TMDB API Key" autocomplete="off">
        <h3 data-i18n="createPin">Create a 4-digit PIN</h3>
        <p data-i18n="pinHelp">Use it to access your account</p>
        <input type="text" id="registerPin" class="input" placeholder="1234" maxlength="4" pattern="[0-9]*" inputmode="numeric" autocomplete="off">
        <button id="registerBtn" class="button" data-i18n="startButton" disabled>Let's create your lists</button>
      </div>
    </div>

    <!-- MAIN SCREEN -->
    <div class="screen" id="mainScreen">
      <div class="container">
        <div class="header">
          <h1 id="mainTitle" data-i18n="mainTitleTemplate">Alright, what did you like?</h1>
          <button id="changeUserBtn" class="button secondary small">ğŸ‘¤</button>
        </div>

        <input type="text" id="searchInput" class="input" data-i18n-placeholder="searchPlaceholder" placeholder="Search movies/series...">
        <div id="searchResults" class="search-results"></div>

        <div class="tabs">
          <button class="tab active" data-tab="lists" data-i18n="yourLists">These are your lists</button>
          <button class="tab" data-tab="friends" data-i18n="friends">Friends</button>
        </div>

        <div class="tab-content active" id="listsTab">
          <form id="newListForm" class="form">
            <input type="text" id="listName" class="input" data-i18n-placeholder="listName" placeholder="List name" required>
            <input type="text" id="listType" class="input" data-i18n-placeholder="listTypeTemplate" placeholder="List type" required>
            <div class="button-group">
              <button type="submit" class="button" data-i18n="create">Create</button>
              <button type="button" id="importBtn" class="button secondary" data-i18n="importPin">Add list by PIN</button>
            </div>
          </form>
          <div id="listDisplay"></div>
          <div class="button-group">
            <button id="copyInstallBtn" class="button" data-i18n="copyUrl">Copy install URL</button>
            <button id="installBtn" class="button" data-i18n="install">Install in your player</button>
          </div>
        </div>

        <div class="tab-content" id="friendsTab">
          <form id="addFriendForm" class="form">
            <input type="text" id="friendUsername" class="input" data-i18n-placeholder="friendUsername" placeholder="Username" required>
            <button type="submit" class="button" data-i18n="addFriend">Add friend</button>
          </form>
          <div id="friendsDisplay"></div>
        </div>
      </div>
    </div>

    <!-- LIST DETAIL SCREEN -->
    <div class="screen" id="listDetailScreen">
      <div class="container">
        <button id="backBtn" class="button secondary" data-i18n="back">â† Back</button>
        <h2 id="listDetailTitle"></h2>
        <div id="listDetailItems" class="detail-items"></div>
      </div>
    </div>

    <!-- FRIEND DETAIL SCREEN -->
    <div class="screen" id="friendDetailScreen">
      <div class="container">
        <button id="backFromFriendBtn" class="button secondary" data-i18n="back">â† Back</button>
        <h2 id="friendDetailTitle"></h2>
        <h3 data-i18n="friendLists">Lists</h3>
        <div id="friendListsDisplay"></div>
        <h3 data-i18n="friendRatings">Recent ratings</h3>
        <div id="friendRatingsDisplay"></div>
      </div>
    </div>

    <!-- LIST MODAL -->
    <div class="modal" id="listModal">
      <div class="modal-content">
        <h3 data-i18n="selectListModal">Which list do you want to add this to?</h3>
        <select id="modalListSelect" class="input"></select>
        <div class="button-group">
          <button id="modalAddBtn" class="button" data-i18n="add">Add</button>
          <button id="modalCancelBtn" class="button secondary" data-i18n="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- PIN MODAL -->
    <div class="modal" id="pinModal">
      <div class="modal-content">
        <h3 data-i18n="importPinTitle">Enter the 6-digit PIN</h3>
        <input type="text" id="pinInput" class="input" placeholder="123456" maxlength="6" pattern="[0-9]*" inputmode="numeric">
        <div class="button-group">
          <button id="pinImportBtn" class="button" data-i18n="import">Import</button>
          <button id="pinCancelBtn" class="button secondary" data-i18n="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- SHOW PIN MODAL -->
    <div class="modal" id="showPinModal">
      <div class="modal-content">
        <h3 data-i18n="sharePinTitle">List PIN</h3>
        <p data-i18n="sharePinText">Share this PIN so others can import the list</p>
        <div class="pin-display" id="pinDisplay"></div>
        <div class="button-group">
          <button id="copyPinBtn" class="button" data-i18n="copyPin">Copy PIN</button>
          <button id="closePinBtn" class="button secondary" data-i18n="close">Close</button>
        </div>
      </div>
    </div>

    <!-- RATING MODAL -->
    <div class="modal" id="ratingModal">
      <div class="modal-content">
        <h3 data-i18n="rateTitle">Rate this item</h3>
        <div class="stars">
          <span class="star" data-rating="1">â˜…</span>
          <span class="star" data-rating="2">â˜…</span>
          <span class="star" data-rating="3">â˜…</span>
          <span class="star" data-rating="4">â˜…</span>
          <span class="star" data-rating="5">â˜…</span>
        </div>
        <textarea id="reviewText" class="input" data-i18n-placeholder="reviewPlaceholder" placeholder="Write a review (optional)..." rows="4"></textarea>
        <div class="button-group">
          <button id="submitRatingBtn" class="button" data-i18n="submit">Submit</button>
          <button id="cancelRatingBtn" class="button secondary" data-i18n="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- RATINGS MODAL (STABLE+) -->
    <div class="modal" id="ratingsModal">
      <div class="modal-content">
        <h3 data-i18n="ratingsTitle">Ratings</h3>
        <!-- â­ STABLE+ FILTRO DE RATINGS â­ -->
        <div class="ratings-filter-buttons">
          <button id="filterAllRatings" class="filter-btn active" data-i18n="filterAll">All</button>
          <button id="filterFriendsRatings" class="filter-btn" data-i18n="filterFriends">Friends only</button>
        </div>
        <div id="ratingsDisplay" class="ratings-list"></div>
        <button id="closeRatingsBtn" class="button" data-i18n="close">Close</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.dataset.tab;
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(targetTab + 'Tab').classList.add('active');
      });
    });
  </script>
</body>
</html>